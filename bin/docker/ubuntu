FROM ubuntu:14.04

ARG CONDA_VERSION=2

RUN apt-get update
RUN apt-get -y upgrade
RUN apt-get install --yes vim build-essential wget curl software-properties-common && apt-get purge && apt-get clean

RUN add-apt-repository -y ppa:ubuntu-toolchain-r/test
RUN apt-get update
RUN apt-get install -qq gcc-5 g++-5
RUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 60 --slave /usr/bin/g++ g++ /usr/bin/g++-5

RUN useradd -m main --shell /bin/bash && echo "main:main" | chpasswd && adduser main sudo
USER main
WORKDIR /home/main

RUN curl https://raw.githubusercontent.com/StatisKit/install-binaries/master/linux/PY$CONDA_VERSION/developer_install -o developer_install
RUN chmod a+rwx developer_install
RUN ./developer_install --prepend-path=no --configure-only=yes --prefix=/home/main/miniconda
env PATH /home/main/miniconda:/home/main/miniconda/bin:$PATH
RUN rm developer_install
RUN chmod -R a+rwx  /home/main/miniconda
RUN conda config --set always_yes yes
RUN conda install vcs ipython jupyter -c statiskit -c conda-forge