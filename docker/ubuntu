FROM ubuntu:14.04

# Update the OS
RUN apt-get update

# Upgrade the OS
RUN apt-get -y upgrade

# Install useful tools
RUN apt-get install -y vim build-essential wget curl software-properties-common
# firefox
RUN apt-get autoremove

# Add user for future work
RUN useradd -m main --shell /bin/bash && echo "main:main" | chpasswd && adduser main sudo

# Install development prerequisites
RUN add-apt-repository -y ppa:ubuntu-toolchain-r/test
RUN apt-get update
RUN apt-get install -qq gcc-5 g++-5
RUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-5 60 --slave /usr/bin/g++ g++ /usr/bin/g++-5
RUN curl https://raw.githubusercontent.com/StatisKit/install-binaries/master/linux/developer_install -o developer_install;
RUN chmod a+rwx developer_install
RUN ./developer_install --prepend-path=no --configure-only=yes --prefix=/home/main/miniconda
env PATH /home/main/miniconda:/home/main/miniconda/bin:$PATH
RUN rm developer_install
RUN chmod -R a+rwx  /home/main/miniconda

# select created user
USER main

WORKDIR /home/main
